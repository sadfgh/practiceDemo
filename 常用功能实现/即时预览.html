<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        img{
            width: 200px;
        }
    </style>
</head>
<body>
    <form action="">
        文件：<input type="file" name="myFile" id="myFile" onchange="getFileContent()" multiple>
    </form>
    
    <script>
    var fileList = []
    function getFileContent(){
        
        /*创建文件读取对象*/
        var body = document.querySelector('body')
        // var reader=new FileReader();
  
        /*文件存储在file表单元素的files属性中，它是一个数组*/
        var file=document.querySelector("#myFile").files;
        fileList.push(file)
        console.log(fileList)

        /*readAsDataURL()读取文件，获取DataURL
        *没有任何的返回值:void：但是读取完文件后，它会将读取的结果存储在文件读取对象的result中
         需要传递一个参数 binary large object:文件(图片或者其它可以嵌入到文档的类型)*/
         for(var i=0;i<file.length;i++){
        (function(i){
            var reader=new FileReader();
            reader.readAsDataURL(file[i]);
            reader.onload =function(){
            /*展示*/
            var img = document.createElement('img')
            img.src = reader.result
            body.appendChild(img)
            
        }
        })(i)
    }

        //  for(var i=0;i<file.length;i++){
        // reader.readAsDataURL(file[i]);
        /*获取数据*/
        /*FileReader提供一个完整的事件模型，用来捕获读取文件时的状态
        * onabort:读取文件中断片时触发
        * onerror:读取错误时触发
        * onload:文件读取成功完成时触发
        * onloadend:读取完成时触发，无论成功还是失败
        * onloadstart:开始读取时触发
        * onprogress:读取文件过程中持续触发*/
        // reader.onload =function(){
        //     /*展示*/
        //     console.log(reader.result)
        //     var img = document.createElement('img')
        //     img.src = reader.result
        //     body.appendChild(img)
            
        // }
    // }
    }
    </script>
</body>
</html>